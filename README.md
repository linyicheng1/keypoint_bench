# 图像点特征性能指标对比

### 支持的点特征
- ORB
- SIFT
- Harris 
- SuperPoint
- ALIKE
- XFeat
- D2-Net
- DISK
- R2D2
- SFD2

### 支持的匹配方法
- 暴力匹配
- lightglue
- 光流

### 评价指标
- AUC  基于 MegaDepth 数据集
- MHA  基于 Hpatch 数据集
- 重复率 基于 Hpatch 数据集
- 基础矩阵 基于TartanAir数据集
- VO里程计 基于KITTI数据集

### 一些结果

#### 参数

> 值得注意的是，许多论文为了指标更高，往往提取更多的特征，并且非极大值抑制范围很小，这样在实际使用的时候会造成特征扎堆的现象。因此，我们使用的参数都是特征点数量较少，并且非极大值抑制的窗口比较大，这更符合实际情况。**尽管这样往往会导致指标较低。**

##### 特征提取参数
- nms_dist: 6
- min_score: 0.0
- top_k: 1000
- threshold: 0
- border_dist: 8

##### 暴力匹配参数

- metric: euclidean
- max_distance: 5
- cross_check: True

##### 光流匹配参数

- distance: 10
- win_size: 21
- levels: 3
- interation: 40

#### 结果

##### 重复率 

| 特征点 | Harris | ALIKE | SuperPoint | XFeat | D2-Net | DISK | R2D2 | SFD2 | LGood (Ours) | EdgePoint (Ours) |
|----------|----------|----------|----------|----------|----------|----------|----------|----------|----------|----------|
| 重复率   | 0.204 | 0.319 | 0.359 | 0.177 |  0.179 | 0.290 | 0.331 | 0.381 | 0.402 | 0.349 | 0.362|
| 平均误差 | 1.861 | 1.317 | 1.466 | 1.508 | 2.022  | 1.473 | 1.483 | 1.507 | 1.447 | 1.390 | 1.366|

##### MHA (暴力匹配)

| 特征点 |  ALIKE | SuperPoint | XFeat | D2-Net | DISK | R2D2 | SFD2 | EdgePoint (Ours) |
|----------|----------|----------|----------|----------|----------|----------|----------|----------|
| MHA@3 | 0.491  | 0.437      | 0.372 | 0.016 | 0.254 | 0.335 | 0.467 | 0.461 |
| MHA@5 | 0.583  | 0.569      | 0.511 | 0.105 | 0.410 | 0.488 | 0.572 | 0.572 |
| MHA@7 | 0.657  | 0.613      | 0.589 | 0.220 | 0.525 | 0.555 | 0.620 | 0.640 |

##### AUC (暴力匹配) MegaDepth



##### 基础矩阵 (光流跟踪) TartanAir


##### 基础矩阵 (描述子匹配) TartanAir


##### VO里程计 KITTI



| 特征点 |  ALIKE | SuperPoint | XFeat | D2-Net | DISK | R2D2 | SFD2 | EdgePoint (Ours) |
|----------|----------|----------|----------|----------|----------|----------|----------|----------|
| Seq00 | 0.491  | 0.437      | 0.372 | 0.016 | 0.254 | 0.335 | 0.467 | 0.461 |
| Seq01 | 0.583  | 0.569      | 0.511 | 0.105 | 0.410 | 0.488 | 0.572 | 0.572 |
| Seq02 | 0.657  | 0.613      | 0.589 | 0.220 | 0.525 | 0.555 | 0.620 | 0.640 |
| Seq03 | 0.711  | 0.667      | 0.640 | 0.258 | 0.570 | 0.601 | 0.658 | 0.679 |
| Seq04 | 0.745  | 0.702      | 0.673 | 0.288 | 0.603 | 0.633 | 0.688 | 0.709 |
| Seq05 | 0.769  | 0.725      | 0.695 | 0.318 | 0.627 | 0.659 | 0.715 | 0.735 |
| Seq06 | 0.791  | 0.747      | 0.717 | 0.348 | 0.645 | 0.682 | 0.738 | 0.758 |
| Seq07 | 0.815  | 0.771      | 0.748 | 0.378 | 0.663 | 0.701 | 0.759 | 0.779 |
| Seq08 | 0.838  | 0.794      | 0.768 | 0.398 | 0.679 | 0.728 | 0.788 | 0.808 |
| Seq09 | 0.858  | 0.814      | 0.788 | 0.427 | 0.693 | 0.745 | 0.826 | 0.846 |
| Seq10 | 0.878  | 0.834      | 0.808 | 0.456 | 0.710 | 7.472 | 0.865 | 0.885 |

## RUN IN Docker 

1. 构造docker镜像

```shell
mkdir keypoint_bench && cd keypoint_bench
wget https://github.com/linyicheng1/keypoint_bench/blob/main/Dockerfile
docker build -t keypoint_bench:v1 .
```

需要等待10-20分钟，下载依赖并且构建镜像

2. 运行docker容器

```shell
docker run -it --gpus all -u root -p 2223:22 -v /数据集下载位置/:/home/data/ keypoint_bench:v1
```

3. 运行python程序

在运行程序前需要修改配置文件中包含的数据集路径，按自己的实际情况修改`/home/code/keypoint_bench/config/config.yaml`文件


运行程序
```shell
cd /home/code/keypoint_bench
python3 main.py --config_file config/config.yaml test 
```

默认得到ALIKE的重复率计算结果

repeatability 0.3157695  rep_mean_err 1.2313193





